<template>
 <HomeHeroSection/>
 <HomeAboutSection/>
 <CommonLoopText/>
 <HomeServiceSection/>
 
 <HomeNewsSection :items="latest3"/>
 <HomeWorksSection2/>
 <HomeContactSection/>
</template>

<script setup lang="ts">
import type { News } from "@/types/news";

/**===================================================================================================================
 * 
 ===================================================================================================================**/


 //------------------------------------------------------------------------------------------------------------
// 引数
//------------------------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------------------------
// 定数・変数（state）
//------------------------------------------------------------------------------------------------------------
  const { all } = useNews()

  const byDateDesc = (a: News, b: News) =>
    new Date(b.date).getTime() - new Date(a.date).getTime()
    const latest3 = computed(() =>
    [...all.value]     .filter(n => n.slug && n.title && n.date)
    .sort(byDateDesc)
    .slice(0, 3)
)
//   const { data } = await useAsyncData<News[]>('news', () => $fetch('/api/news'))
// const latest3 = computed(() =>
//   (data.value ?? []).slice().sort((a,b)=>b.date.localeCompare(a.date)).slice(0,3)
// )
//------------------------------------------------------------------------------------------------------------
// ライフサイクル
//------------------------------------------------------------------------------------------------------------
/*
onBeforeMount(() => {
  //記憶した位置、サイズでの復帰を可能にする
})

onMounted(() => {
  //window.addEventListener('resize', onGetPosition)
})

onBeforeUnmount(() => {
  //window.removeEventListener('resize', onGetPosition)
})
*/
//------------------------------------------------------------------------------------------------------------
//watch
//------------------------------------------------------------------------------------------------------------
/*
watch(
  () => props.value,
  (value) => {
    input.value = value
  }
)
//------------------------------------------------------------------------------------------------------------
//computed
//------------------------------------------------------------------------------------------------------------
/*
const counter: Ref<number> = useState('counter', () => 500)

// computedによりcounter変数の監視が行われる
const doubleCount = computed(() => {
  return counter.value * 2
})
*/
//------------------------------------------------------------------------------------------------------------
// エミット
//------------------------------------------------------------------------------------------------------------
/*
const emits = defineEmits<{ (e: 'update:value', item: any): void }>()
const input = ref(props.value)

function onChange(value: any) {
  input.value = value
  emits('update:value', value)
}
*/

//------------------------------------------------------------------------------------------------------------
// メソッド
//------------------------------------------------------------------------------------------------------------
</script>

<style lang="scss" scoped>
html, body {
  overflow-x: hidden;
  width: 100%;
}
</style>